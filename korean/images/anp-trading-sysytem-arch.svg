<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="900" height="700" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="900" height="700" fill="#f8f9fa" />
  
  <!-- Title -->
  <text x="450" y="40" font-family="Arial, sans-serif" font-size="24" text-anchor="middle" font-weight="bold">ANP Agent Peer-to-Peer Trading System Architecture</text>
  
  <!-- ANP Protocol Environment - Outer Container -->
  <rect x="50" y="70" width="800" height="580" rx="20" ry="20" fill="#e6f3ff" stroke="#2980b9" stroke-width="2" stroke-dasharray="5,5" />
  <text x="450" y="95" font-family="Arial, sans-serif" font-size="18" text-anchor="middle" fill="#2980b9">Agent Network Protocol (ANP) Environment</text>
  
  <!-- User Side -->
  <rect x="100" y="130" width="180" height="190" rx="10" ry="10" fill="#d5e8d4" stroke="#82b366" stroke-width="2" />
  <text x="190" y="155" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" font-weight="bold">User Side</text>
  
  <!-- User -->
  <rect x="120" y="170" width="140" height="50" rx="8" ry="8" fill="#ffffff" stroke="#82b366" stroke-width="2" />
  <text x="190" y="200" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">User</text>
  
  <!-- User Agent -->
  <rect x="120" y="240" width="140" height="60" rx="8" ry="8" fill="#ffffff" stroke="#82b366" stroke-width="2" />
  <text x="190" y="260" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">User Agent</text>
  <text x="190" y="280" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">(Client Agent)</text>
  
  <!-- Hotel Side -->
  <rect x="620" y="130" width="180" height="190" rx="10" ry="10" fill="#dae8fc" stroke="#6c8ebf" stroke-width="2" />
  <text x="710" y="155" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" font-weight="bold">Hotel Side</text>
  
  <!-- Hotel -->
  <rect x="640" y="170" width="140" height="50" rx="8" ry="8" fill="#ffffff" stroke="#6c8ebf" stroke-width="2" />
  <text x="710" y="200" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">Hotel</text>
  
  <!-- Hotel Agent -->
  <rect x="640" y="240" width="140" height="60" rx="8" ry="8" fill="#ffffff" stroke="#6c8ebf" stroke-width="2" />
  <text x="710" y="260" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">Hotel Agent</text>
  <text x="710" y="280" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">(Service Provider)</text>
  
  <!-- Payment Section -->
  <rect x="360" y="370" width="180" height="190" rx="10" ry="10" fill="#ffe6cc" stroke="#d79b00" stroke-width="2" />
  <text x="450" y="395" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" font-weight="bold">Payment System</text>
  
  <!-- Payment Infrastructure -->
  <rect x="380" y="410" width="140" height="50" rx="8" ry="8" fill="#ffffff" stroke="#d79b00" stroke-width="2" />
  <text x="450" y="440" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">Payment Infrastructure</text>
  <text x="450" y="455" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">(Banking/Blockchain)</text>
  
  <!-- Payment Agent -->
  <rect x="380" y="480" width="140" height="60" rx="8" ry="8" fill="#ffffff" stroke="#d79b00" stroke-width="2" />
  <text x="450" y="505" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">Payment Agent</text>
  <text x="450" y="525" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">(Transaction Handler)</text>
  
  <!-- Arbitration Agent (Optional) -->
  <rect x="100" y="440" width="140" height="60" rx="8" ry="8" fill="#f5f5f5" stroke="#666666" stroke-width="2" stroke-dasharray="5,3" />
  <text x="170" y="465" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">Arbitration Agent</text>
  <text x="170" y="485" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">(Dispute Resolution)</text>
  <text x="170" y="500" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" font-style="italic">Optional</text>
  
  <!-- Notary/Registry Service (Optional) -->
  <rect x="660" y="440" width="140" height="60" rx="8" ry="8" fill="#f5f5f5" stroke="#666666" stroke-width="2" stroke-dasharray="5,3" />
  <text x="730" y="465" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">Trust/Notary Service</text>
  <text x="730" y="485" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">(Registry/Verification)</text>
  <text x="730" y="500" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" font-style="italic">Optional</text>
  
  <!-- Connection Lines -->
  <!-- User Agent and Hotel Agent -->
  <path d="M 260 270 L 640 270" stroke="#000000" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- User Agent and Payment Agent -->
  <path d="M 190 300 C 190 400 300 510 380 510" stroke="#000000" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Hotel Agent and Payment Agent -->
  <path d="M 710 300 C 710 400 600 510 520 510" stroke="#000000" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- User Agent and Arbitration Agent -->
  <path d="M 170 300 L 170 440" stroke="#666666" stroke-width="2" stroke-dasharray="5,3" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Hotel Agent and Arbitration Agent -->
  <path d="M 640 270 C 400 270 300 440 240 470" stroke="#666666" stroke-width="2" stroke-dasharray="5,3" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Hotel Agent and Notary/Registry Service -->
  <path d="M 710 300 L 710 440" stroke="#666666" stroke-width="2" stroke-dasharray="5,3" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- User Agent and Notary/Registry Service -->
  <path d="M 260 270 C 500 270 600 440 660 470" stroke="#666666" stroke-width="2" stroke-dasharray="5,3" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Arrow Marker Definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#000000" />
    </marker>
  </defs>
  
  <!-- Legend -->
  <rect x="50" y="600" width="800" height="40" rx="5" ry="5" fill="#f5f5f5" stroke="#666666" stroke-width="1" />
  
  <!-- Solid Line -->
  <line x1="100" y1="620" x2="150" y2="620" stroke="#000000" stroke-width="2" />
  <text x="170" y="625" font-family="Arial, sans-serif" font-size="12">Required Interaction Path</text>
  
  <!-- Dashed Line -->
  <line x1="300" y1="620" x2="350" y2="620" stroke="#666666" stroke-width="2" stroke-dasharray="5,3" />
  <text x="370" y="625" font-family="Arial, sans-serif" font-size="12">Optional Interaction Path</text>
  
  <!-- ANP Protocol Annotation -->
  <text x="550" y="625" font-family="Arial, sans-serif" font-size="12" font-style="italic">All agent communications based on ANP protocol</text>
  
  <!-- Interaction Logic Brief Description -->
  <text x="450" y="570" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" font-weight="bold">Interaction Logic</text>
  <text x="450" y="590" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Agents exchange and verify through Verifiable Credentials (VC), forming credential chains to ensure trusted and complete transactions</text>
</svg>
