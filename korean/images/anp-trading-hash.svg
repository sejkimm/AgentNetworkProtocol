<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="900" height="500" xmlns="http://www.w3.org/2000/svg">
    <!-- Style definitions -->
    <defs>
        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
        </marker>
        <filter id="shadow" x="-10%" y="-10%" width="120%" height="130%">
            <feDropShadow dx="2" dy="2" stdDeviation="2" flood-color="#0002"/>
        </filter>
    </defs>
    
    <!-- Background -->
    <rect width="900" height="500" fill="white"/>
    
    <!-- Title -->
    <text x="450" y="30" font-family="Arial, sans-serif" font-size="24" text-anchor="middle" font-weight="bold">ANP Protocol - VC Hash Chain Relationships in Ideal State</text>
    
    <!-- VC box - Hotel Agent color -->
    <rect x="50" y="80" width="200" height="80" rx="10" ry="10" fill="white" stroke="#1976d2" stroke-width="2" filter="url(#shadow)"/>
    <text x="150" y="110" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" font-weight="bold">Order Offer Credential</text>
    <text x="150" y="135" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">OrderOfferCredential</text>
    <text x="150" y="150" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#1976d2">Issuer: Hotel Agent</text>
    
    <!-- VC box - User Agent color -->
    <rect x="350" y="80" width="200" height="80" rx="10" ry="10" fill="white" stroke="#388e3c" stroke-width="2" filter="url(#shadow)"/>
    <text x="450" y="110" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" font-weight="bold">Booking Confirmation Credential</text>
    <text x="450" y="135" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">BookingConfirmationCredential</text>
    <text x="450" y="150" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#388e3c">Issuer: User Agent</text>
    
    <!-- VC box - Hotel Agent color -->
    <rect x="650" y="80" width="200" height="80" rx="10" ry="10" fill="white" stroke="#1976d2" stroke-width="2" filter="url(#shadow)"/>
    <text x="750" y="110" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" font-weight="bold">Payment Request Credential</text>
    <text x="750" y="135" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">PaymentRequestCredential</text>
    <text x="750" y="150" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#1976d2">Issuer: Hotel Agent</text>
    
    <!-- VC box - Payment Agent color -->
    <rect x="650" y="200" width="200" height="80" rx="10" ry="10" fill="white" stroke="#f57c00" stroke-width="2" filter="url(#shadow)"/>
    <text x="750" y="230" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" font-weight="bold">Payment Instruction Credential</text>
    <text x="750" y="255" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">PaymentInstructionCredential</text>
    <text x="750" y="270" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#f57c00">Issuer: Payment Agent</text>
    
    <!-- VC box - Payment Agent color -->
    <rect x="350" y="200" width="200" height="80" rx="10" ry="10" fill="white" stroke="#f57c00" stroke-width="2" filter="url(#shadow)"/>
    <text x="450" y="230" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" font-weight="bold">Funds Escrowed Credential</text>
    <text x="450" y="255" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">FundsEscrowedCredential</text>
    <text x="450" y="270" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#f57c00">Issuer: Payment Agent</text>
    
    <!-- VC box - Hotel Agent color (optional) -->
    <rect x="50" y="200" width="200" height="80" rx="10" ry="10" fill="white" stroke="#1976d2" stroke-width="2" stroke-dasharray="5,5" filter="url(#shadow)"/>
    <text x="150" y="225" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" font-weight="bold">Booking Finalized Credential</text>
    <text x="150" y="245" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">(Optional)</text>
    <text x="150" y="265" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">BookingFinalizedCredential</text>
    <text x="150" y="280" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#1976d2">Issuer: Hotel Agent</text>
    
    <!-- VC box - User Agent color -->
    <rect x="350" y="320" width="200" height="90" rx="10" ry="10" fill="white" stroke="#388e3c" stroke-width="2" filter="url(#shadow)"/>
    <text x="450" y="350" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" font-weight="bold">Service Completion Confirmation</text>
    <text x="450" y="375" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">ServiceCompletionConfirmation</text>
    <text x="450" y="395" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#388e3c">Issuer: User Agent</text>
    
    <!-- VC box - Payment Agent color -->
    <rect x="650" y="320" width="200" height="80" rx="10" ry="10" fill="white" stroke="#f57c00" stroke-width="2" filter="url(#shadow)"/>
    <text x="750" y="350" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" font-weight="bold">Funds Released Credential</text>
    <text x="750" y="375" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">FundsReleasedCredential</text>
    <text x="750" y="390" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#f57c00">Issuer: Payment Agent</text>
    
    <!-- Hash chain links -->
    <line x1="250" y1="120" x2="350" y2="120" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="550" y1="120" x2="650" y2="120" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="750" y1="160" x2="750" y2="200" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="650" y1="240" x2="550" y2="240" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <path d="M350 240 C300 240, 280 240, 250 240" stroke="#333" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
    <path d="M450 280 L450 320" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="150" y1="280" x2="350" y2="360" stroke="#333" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
    <line x1="550" y1="360" x2="650" y2="360" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- Hash chain link texts -->
    <text x="300" y="110" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">Contains Hash</text>
    <text x="600" y="110" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">Contains Hash</text>
    <text x="770" y="180" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">Contains Hash</text>
    <text x="600" y="230" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">Contains Hash</text>
    <text x="300" y="230" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">Contains Hash (Optional)</text>
    <text x="470" y="300" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">Contains Hash</text>
    <text x="230" y="340" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">Contains Hash (Optional Path)</text>
    <text x="600" y="350" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">Contains Hash</text>
    
    <!-- Legend -->
    <rect x="80" y="430" width="20" height="15" fill="white" stroke="#1976d2" stroke-width="1"/>
    <text x="105" y="442" font-family="Arial, sans-serif" font-size="12" fill="#1976d2">Issued by Hotel Agent</text>
    
    <rect x="240" y="430" width="20" height="15" fill="white" stroke="#388e3c" stroke-width="1"/>
    <text x="265" y="442" font-family="Arial, sans-serif" font-size="12" fill="#388e3c">Issued by User Agent</text>
    
    <rect x="400" y="430" width="20" height="15" fill="white" stroke="#f57c00" stroke-width="1"/>
    <text x="425" y="442" font-family="Arial, sans-serif" font-size="12" fill="#f57c00">Issued by Payment Agent</text>
    
    <!-- Arrow legend -->
    <g transform="translate(550, 440)">
        <line x1="0" y1="0" x2="30" y2="0" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
        <text x="50" y="5" font-family="Arial, sans-serif" font-size="12">Required Hash Reference</text>
    </g>
    
    <g transform="translate(700, 440)">
        <line x1="0" y1="0" x2="30" y2="0" stroke="#333" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
        <text x="50" y="5" font-family="Arial, sans-serif" font-size="12">Optional Hash Reference</text>
    </g>
    
    <!-- Chart description -->
    <text x="450" y="480" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#555">
        Figure 4: VC Hash Chain in ANP Protocol - Each credential forms an immutable chain structure by containing the hash of the previous credential
    </text>
</svg>
